{% extends 'base.html' %}
{% load static %}

{% block title %}Shanti Yuwa Club - Youth Led Community Organization{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative min-h-[90vh] flex items-center overflow-hidden bg-surface-950">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
        <div class="hero-slides w-full h-full relative">
            <div class="absolute inset-0 bg-center bg-cover" style="background-image: url('{% static 'images/hero-bg.jpg' %}?v={% now 'U' %}')"></div>
        </div>
        <div class="absolute inset-0 bg-surface-950/70"></div>
    </div>

    <!-- Hero Content -->
    <div class="relative z-10 max-w-[1400px] mx-auto px-6 lg:px-10 py-32 lg:py-40">
        <div class="max-w-3xl">
            <p class="text-brand-400 text-sm font-semibold tracking-widest uppercase mb-6 animate-fade-in">
                Youth-Led Community Organization
            </p>
            <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold text-white leading-[1.05] mb-8 animate-slide-up tracking-tight">
                Empowering Youth,
                <span class="text-brand-400">Building Community</span>
            </h1>
            <p class="text-lg text-surface-300 mb-10 leading-relaxed max-w-xl animate-slide-up" style="animation-delay: 0.1s;">
                We are a youth-led organization in Biratnagar, Nepal working on social awareness, empowerment, and local outreach.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 animate-slide-up" style="animation-delay: 0.2s;">
                <a href="{% url 'about' %}"
                    class="inline-flex items-center justify-center px-8 py-4 rounded-full bg-brand-500 text-white font-semibold hover:bg-brand-600 transition-all duration-300 text-sm tracking-wide">
                    Discover Our Story
                    <i class="fas fa-arrow-right ml-3 text-xs"></i>
                </a>
                <a href="{% url 'member_register' %}"
                    class="inline-flex items-center justify-center px-8 py-4 rounded-full border border-white/20 text-white font-semibold hover:bg-white/10 transition-all duration-300 text-sm tracking-wide">
                    Join Our Community
                </a>
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-10">
        <a href="#about" class="flex flex-col items-center text-white/40 hover:text-white/70 transition-colors duration-200">
            <span class="text-[10px] tracking-widest uppercase mb-2">Scroll</span>
            <div class="w-5 h-8 rounded-full border border-white/30 flex items-start justify-center p-1">
                <div class="w-1 h-2 bg-white/60 rounded-full animate-bounce"></div>
            </div>
        </a>
    </div>
</section>

<!-- About Preview Section -->
<section id="about" class="py-24 lg:py-32 bg-surface-50">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="grid lg:grid-cols-2 gap-16 lg:gap-24 items-center">
            <!-- Image Side -->
            <div class="relative">
                <div class="aspect-[4/5] rounded-2xl overflow-hidden">
                    <img src="{% static 'images/about-home.jpg' %}?v={% now 'U' %}" alt="Shanti Yuwa Club Team"
                        class="w-full h-full object-cover">
                </div>
                <!-- Floating Stats Card -->
                <div class="absolute -bottom-6 -right-4 sm:-bottom-8 sm:right-8 bg-surface-900 text-white rounded-xl p-6 shadow-2xl">
                    <p class="text-3xl font-extrabold">5+</p>
                    <p class="text-surface-400 text-sm mt-1">Years of Impact</p>
                </div>
            </div>

            <!-- Content Side -->
            <div>
                <p class="text-brand-600 text-xs font-bold tracking-widest uppercase mb-4">About Us</p>
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-surface-900 leading-tight mb-6 tracking-tight">
                    Creating Positive Change Through Youth Leadership
                </h2>
                <p class="text-surface-500 text-lg leading-relaxed mb-6">
                    Shanti Yuwa Club is dedicated to empowering youth and creating positive change in our community. Founded in 2020, our organization works on various social issues and community development projects in Biratnagar and surrounding areas.
                </p>
                <p class="text-surface-500 text-lg leading-relaxed mb-10">
                    Our mission is to promote peace, social awareness, and youth empowerment through various initiatives and programs.
                </p>

                <div class="grid grid-cols-2 gap-4 mb-10">
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-brand-500"></div>
                        <span class="text-surface-700 text-sm font-medium">Youth Empowerment</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-brand-500"></div>
                        <span class="text-surface-700 text-sm font-medium">Community Development</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-brand-500"></div>
                        <span class="text-surface-700 text-sm font-medium">Social Awareness</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="w-2 h-2 rounded-full bg-brand-500"></div>
                        <span class="text-surface-700 text-sm font-medium">Environmental Action</span>
                    </div>
                </div>

                <a href="{% url 'about' %}" class="inline-flex items-center gap-2 text-surface-900 font-semibold text-sm border-b-2 border-surface-900 pb-1 hover:text-brand-600 hover:border-brand-600 transition-colors duration-200">
                    Learn More About Us
                    <i class="fas fa-arrow-right text-xs"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Programs Section -->
<section class="py-24 lg:py-32 bg-white">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <!-- Section Header -->
        <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-16">
            <div class="max-w-2xl">
                <p class="text-brand-600 text-xs font-bold tracking-widest uppercase mb-4">Our Programs</p>
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-surface-900 tracking-tight">
                    Initiatives That Make a Difference
                </h2>
            </div>
            <a href="{% url 'programs' %}" class="inline-flex items-center gap-2 text-surface-900 font-semibold text-sm border-b-2 border-surface-900 pb-1 hover:text-brand-600 hover:border-brand-600 transition-colors duration-200 self-start lg:self-auto">
                View All Programs
                <i class="fas fa-arrow-right text-xs"></i>
            </a>
        </div>

        <!-- Programs Grid -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% if programs %}
            {% for program in programs %}
            <div class="group bg-surface-50 rounded-2xl overflow-hidden bento-card">
                <div class="relative aspect-[16/10] overflow-hidden">
                    <img src="{{ program.image.url }}" alt="{{ program.title }}"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                    {% if program.id in enrolled_program_ids %}
                    <div class="absolute top-4 right-4">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-500 text-white">
                            Enrolled
                        </span>
                    </div>
                    {% endif %}
                </div>
                <div class="p-6">
                    <h3 class="text-lg font-bold text-surface-900 mb-2 group-hover:text-brand-600 transition-colors duration-200">
                        {{ program.title }}</h3>
                    <p class="text-surface-500 text-sm mb-5 line-clamp-2">{{ program.short_description }}</p>
                    <div class="flex items-center justify-between">
                        <a href="{% url 'program_detail' program.slug %}" class="inline-flex items-center gap-2 text-sm font-semibold text-surface-900 hover:text-brand-600 transition-colors duration-200">
                            Learn More <i class="fas fa-arrow-right text-xs"></i>
                        </a>
                        {% if user.is_authenticated %}
                            {% if program.id in enrolled_program_ids %}
                            <span class="text-xs text-green-600 font-medium">Member</span>
                            {% else %}
                            <a href="{% url 'enroll_in_program' program.id %}" class="text-xs font-semibold text-brand-600 hover:text-brand-700 transition-colors">Enroll</a>
                            {% endif %}
                        {% else %}
                        <a href="{% url 'member_register' %}" class="text-xs font-semibold text-surface-400 hover:text-brand-600 transition-colors">Join to Enroll</a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="col-span-full text-center py-16">
                <p class="text-surface-400 text-lg">No programs available at the moment.</p>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Team Section -->
<section class="py-24 lg:py-32 bg-surface-950 text-white">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-16">
            <div class="max-w-2xl">
                <p class="text-brand-400 text-xs font-bold tracking-widest uppercase mb-4">Our Team</p>
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold tracking-tight">
                    Meet the Passionate People
                </h2>
            </div>
            <a href="{% url 'about' %}#team" class="inline-flex items-center gap-2 text-white font-semibold text-sm border-b border-white/30 pb-1 hover:border-brand-400 hover:text-brand-400 transition-colors duration-200 self-start lg:self-auto">
                View Full Team <i class="fas fa-arrow-right text-xs"></i>
            </a>
        </div>

        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {% if team_members %}
            {% for member in team_members %}
            <div class="group">
                <div class="relative aspect-[3/4] rounded-2xl overflow-hidden mb-5">
                    <img src="{{ member.image.url }}" alt="{{ member.name }}"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                    <div class="absolute inset-0 bg-gradient-to-t from-surface-950/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <!-- Social Links Overlay -->
                    <div class="absolute bottom-4 left-4 right-4 flex justify-center gap-3 transform translate-y-8 group-hover:translate-y-0 opacity-0 group-hover:opacity-100 transition-all duration-300">
                        {% if member.facebook %}
                        <a href="{{ member.facebook }}" target="_blank" rel="noopener noreferrer"
                            class="w-9 h-9 rounded-full bg-white/15 backdrop-blur-sm hover:bg-brand-500 flex items-center justify-center text-white transition-all duration-200" aria-label="{{ member.name }}'s Facebook">
                            <i class="fab fa-facebook-f text-sm"></i>
                        </a>
                        {% endif %}
                        {% if member.instagram %}
                        <a href="{{ member.instagram }}" target="_blank" rel="noopener noreferrer"
                            class="w-9 h-9 rounded-full bg-white/15 backdrop-blur-sm hover:bg-brand-500 flex items-center justify-center text-white transition-all duration-200" aria-label="{{ member.name }}'s Instagram">
                            <i class="fab fa-instagram text-sm"></i>
                        </a>
                        {% endif %}
                        {% if member.twitter %}
                        <a href="{{ member.twitter }}" target="_blank" rel="noopener noreferrer"
                            class="w-9 h-9 rounded-full bg-white/15 backdrop-blur-sm hover:bg-brand-500 flex items-center justify-center text-white transition-all duration-200" aria-label="{{ member.name }}'s Twitter">
                            <i class="fab fa-twitter text-sm"></i>
                        </a>
                        {% endif %}
                    </div>
                </div>
                <h3 class="text-base font-bold text-white">{{ member.name }}</h3>
                <p class="text-brand-400 text-sm mt-1">{{ member.position }}</p>
            </div>
            {% endfor %}
            {% else %}
            <div class="col-span-full text-center py-12">
                <p class="text-surface-500 text-lg">Team information coming soon!</p>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Gallery Preview Section -->
<section class="py-24 lg:py-32 bg-white">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-16">
            <div class="max-w-2xl">
                <p class="text-brand-600 text-xs font-bold tracking-widest uppercase mb-4">Photo Gallery</p>
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-surface-900 tracking-tight">
                    Glimpses of Our Journey
                </h2>
            </div>
            <a href="{% url 'gallery' %}" class="inline-flex items-center gap-2 text-surface-900 font-semibold text-sm border-b-2 border-surface-900 pb-1 hover:text-brand-600 hover:border-brand-600 transition-colors duration-200 self-start lg:self-auto">
                View Full Gallery <i class="fas fa-arrow-right text-xs"></i>
            </a>
        </div>

        {% if gallery_images %}
        <div class="relative max-w-6xl mx-auto">
            <div id="gallery-slideshow" class="relative overflow-hidden rounded-2xl" style="height: 550px;">
                <div id="slides-container" class="relative w-full h-full">
                    {% for image in gallery_images %}
                    <div class="gallery-slide absolute inset-0 opacity-0 transition-opacity duration-700 ease-in-out {% if forloop.first %}active opacity-100{% endif %}"
                        data-slide-index="{{ forloop.counter0 }}" data-image-url="{{ image.image.url }}"
                        data-title="{{ image.title }}" data-category="{{ image.category.name }}">
                        <img src="{{ image.image.url }}" alt="{{ image.title }}" class="w-full h-full object-cover"
                            loading="{% if forloop.first %}eager{% else %}lazy{% endif %}">
                        <div class="absolute inset-0 bg-gradient-to-t from-surface-950/80 via-surface-950/20 to-transparent"></div>
                        <div class="absolute bottom-0 left-0 right-0 p-8 text-white">
                            <div class="max-w-3xl">
                                <span class="inline-block px-3 py-1 rounded-full bg-brand-500/80 text-xs font-medium mb-3">
                                    {{ image.category.name }}
                                </span>
                                <h3 class="text-2xl md:text-3xl font-bold mb-2">{{ image.title }}</h3>
                                {% if image.description %}
                                <p class="text-surface-300 text-sm">{{ image.description|truncatewords:20 }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex gap-2">
                    {% for image in gallery_images %}
                    <span class="slide-indicator w-2 h-2 rounded-full bg-white/40 transition-all duration-300 {% if forloop.first %}active !w-8 !bg-white{% endif %}"></span>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% else %}
        <div class="text-center py-12">
            <p class="text-surface-400 text-lg">Gallery images coming soon!</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- Life at SYC Section -->
<section class="py-24 lg:py-32 bg-surface-50">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="text-center max-w-2xl mx-auto mb-16">
            <p class="text-brand-600 text-xs font-bold tracking-widest uppercase mb-4">Life at SYC</p>
            <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-surface-900 tracking-tight">
                Experience What It's Like to Be Part of Our Family
            </h2>
        </div>

        <!-- Bento Grid -->
        <div class="grid md:grid-cols-3 gap-6 mb-16">
            <div class="group bg-white rounded-2xl overflow-hidden bento-card">
                <div class="relative aspect-[16/10] overflow-hidden">
                    <img src="{% static 'images/life-community.jpg' %}?v={% now 'U' %}" alt="Community Meeting"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                </div>
                <div class="p-6">
                    <h3 class="text-lg font-bold text-surface-900 mb-2">Supportive Community</h3>
                    <p class="text-surface-500 text-sm leading-relaxed">Join a family of like-minded individuals passionate about creating positive change.</p>
                </div>
            </div>

            <div class="group bg-white rounded-2xl overflow-hidden bento-card">
                <div class="relative aspect-[16/10] overflow-hidden">
                    <img src="{% static 'images/life-skills.jpg' %}?v={% now 'U' %}" alt="Skills Workshop"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                </div>
                <div class="p-6">
                    <h3 class="text-lg font-bold text-surface-900 mb-2">Skills Development</h3>
                    <p class="text-surface-500 text-sm leading-relaxed">Enhance your leadership and communication skills through hands-on experience.</p>
                </div>
            </div>

            <div class="group bg-white rounded-2xl overflow-hidden bento-card">
                <div class="relative aspect-[16/10] overflow-hidden">
                    <img src="{% static 'images/life-impact.jpg' %}?v={% now 'U' %}" alt="Community Impact"
                        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700">
                </div>
                <div class="p-6">
                    <h3 class="text-lg font-bold text-surface-900 mb-2">Meaningful Impact</h3>
                    <p class="text-surface-500 text-sm leading-relaxed">Experience the fulfillment of making a real difference in people's lives.</p>
                </div>
            </div>
        </div>

        <!-- Club Life Gallery Grid -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="aspect-square rounded-xl overflow-hidden">
                <img src="{% static 'images/club-life-1.jpg' %}?v={% now 'U' %}" alt="Club Activity" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
            </div>
            <div class="aspect-square rounded-xl overflow-hidden">
                <img src="{% static 'images/club-life-2.jpg' %}?v={% now 'U' %}" alt="Club Activity" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
            </div>
            <div class="aspect-square rounded-xl overflow-hidden">
                <img src="{% static 'images/club-life-3.jpg' %}?v={% now 'U' %}" alt="Club Activity" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
            </div>
            <div class="aspect-square rounded-xl overflow-hidden">
                <img src="{% static 'images/club-life-4.jpg' %}?v={% now 'U' %}" alt="Club Activity" class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
            </div>
        </div>

        <!-- Testimonials -->
        <div class="mt-16 grid md:grid-cols-2 gap-6">
            <div class="bg-white rounded-2xl p-8">
                <div class="flex items-center gap-1 mb-4">
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                </div>
                <p class="text-surface-600 text-base leading-relaxed mb-6">"Being part of Shanti Yuwa Club has been transformative. I've developed skills I never knew I had and made lifelong friends while serving our community."</p>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-surface-900 flex items-center justify-center text-white text-sm font-bold">RS</div>
                    <div>
                        <h4 class="font-bold text-surface-900 text-sm">Ram Sharma</h4>
                        <p class="text-surface-400 text-xs">Member since 2021</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-2xl p-8">
                <div class="flex items-center gap-1 mb-4">
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                    <i class="fas fa-star text-brand-400 text-sm"></i>
                </div>
                <p class="text-surface-600 text-base leading-relaxed mb-6">"The support and encouragement I've received at Shanti Yuwa Club have helped me grow both personally and professionally. The work we do here truly matters."</p>
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-brand-500 flex items-center justify-center text-white text-sm font-bold">SP</div>
                    <div>
                        <h4 class="font-bold text-surface-900 text-sm">Sita Poudel</h4>
                        <p class="text-surface-400 text-xs">Volunteer since 2022</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
<section class="py-20 bg-surface-900">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 lg:gap-16">
            <div class="text-center">
                <p class="text-4xl lg:text-5xl font-extrabold text-white stat-number mb-2">5+</p>
                <p class="text-surface-400 text-sm tracking-wide">Years Active</p>
            </div>
            <div class="text-center">
                <p class="text-4xl lg:text-5xl font-extrabold text-white stat-number mb-2">100+</p>
                <p class="text-surface-400 text-sm tracking-wide">Members</p>
            </div>
            <div class="text-center">
                <p class="text-4xl lg:text-5xl font-extrabold text-white stat-number mb-2">20+</p>
                <p class="text-surface-400 text-sm tracking-wide">Projects</p>
            </div>
            <div class="text-center">
                <p class="text-4xl lg:text-5xl font-extrabold text-white stat-number mb-2">1000+</p>
                <p class="text-surface-400 text-sm tracking-wide">Lives Impacted</p>
            </div>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="py-24 lg:py-32 bg-surface-50">
    <div class="max-w-[1400px] mx-auto px-6 lg:px-10">
        <div class="bg-surface-950 rounded-3xl overflow-hidden">
            <div class="px-8 py-16 md:px-16 lg:px-24 lg:py-24 text-center">
                <p class="text-brand-400 text-xs font-bold tracking-widest uppercase mb-6">Get Involved</p>
                <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-6 tracking-tight max-w-2xl mx-auto">
                    Ready to Make a Difference?
                </h2>
                <p class="text-surface-400 text-lg max-w-xl mx-auto mb-10">
                    Join Shanti Yuwa Club and become part of a movement that's changing lives and building a better community.
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="{% url 'contact' %}" class="inline-flex items-center justify-center px-8 py-4 rounded-full bg-brand-500 text-white font-semibold hover:bg-brand-600 transition-all duration-300 text-sm">
                        Contact Us
                    </a>
                    <a href="{% url 'programs' %}" class="inline-flex items-center justify-center px-8 py-4 rounded-full border border-white/20 text-white font-semibold hover:bg-white/10 transition-all duration-300 text-sm">
                        Explore Programs
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const slideshow = document.getElementById('gallery-slideshow');
        if (!slideshow) return;

        const slides = document.querySelectorAll('.gallery-slide');
        const indicators = document.querySelectorAll('.slide-indicator');
        let currentSlide = 0;
        let autoPlayInterval;
        const SLIDE_INTERVAL = 5000;

        function goToSlide(index) {
            if (index < 0) index = slides.length - 1;
            else if (index >= slides.length) index = 0;

            slides.forEach((slide, i) => {
                if (i === index) {
                    slide.classList.add('active', 'opacity-100');
                    slide.classList.remove('opacity-0');
                } else {
                    slide.classList.remove('active', 'opacity-100');
                    slide.classList.add('opacity-0');
                }
            });

            indicators.forEach((indicator, i) => {
                if (i === index) {
                    indicator.classList.add('active', '!w-8', '!bg-white');
                    indicator.classList.remove('bg-white/40');
                } else {
                    indicator.classList.remove('active', '!w-8', '!bg-white');
                    indicator.classList.add('bg-white/40');
                }
            });

            currentSlide = index;
        }

        function startAutoPlay() {
            if (slides.length <= 1) return;
            autoPlayInterval = setInterval(() => goToSlide(currentSlide + 1), SLIDE_INTERVAL);
        }

        startAutoPlay();

        // Pause on hover
        slideshow.addEventListener('mouseenter', () => clearInterval(autoPlayInterval));
        slideshow.addEventListener('mouseleave', startAutoPlay);

        // Touch support
        let touchStartX = 0;
        slideshow.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
        slideshow.addEventListener('touchend', (e) => {
            const diff = touchStartX - e.changedTouches[0].screenX;
            if (Math.abs(diff) > 50) {
                clearInterval(autoPlayInterval);
                goToSlide(diff > 0 ? currentSlide + 1 : currentSlide - 1);
                startAutoPlay();
            }
        }, { passive: true });
    });
</script>
{% endblock %}
